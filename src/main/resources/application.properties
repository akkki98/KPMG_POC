###################################################################################################
# Spring Boot Application Configuration
# Generated scaffold adapted for Azure SQL + Azure Service Bus + JWT.
# Replace ALL <PLACEHOLDER> values. Do NOT commit real secrets to source control.
###################################################################################################

spring.application.name=demo

###############################################
# Server
###############################################
server.port=8080

###############################################
# Azure SQL Database Connection (JDBC)
# Docs: https://learn.microsoft.com/azure/azure-sql/database/connect-query-java
###############################################
# Format:
# spring.datasource.url=jdbc:sqlserver://<server-name>.database.windows.net:1433;database=<database-name>;encrypt=true;trustServerCertificate=false;loginTimeout=30;
spring.datasource.url=jdbc:sqlserver://quickcart1.database.windows.net:1433;database=kpmgdb;encrypt=true;trustServerCertificate=false;loginTimeout=30;
spring.datasource.username=akshay@quickcart1
spring.datasource.password=Aksquickcart98@
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect

# Connection pool (Hikari) tuning (adjust as needed)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000

###############################################
# Azure Service Bus
# Provide full connection string or configure Managed Identity via code (preferred for production).
###############################################
# Azure Service Bus disabled for now (connection string removed). Uncomment and provide full string when enabling.
# Example (DO NOT USE REAL VALUES):
# azure.servicebus.connection-string=Endpoint=sb://<namespace>.servicebus.windows.net/;SharedAccessKeyName=<KeyName>;SharedAccessKey=<KeyValue>;EntityPath=<queueName>
# Property reads from environment variable AZURE_SERVICEBUS_CONNECTION_STRING. Leave blank in file; set only in env.
# Hardcoded connection string (NOT RECOMMENDED for production; remove before committing to public repos)
# Replace <namespace>, <KeyName>, <KeyValue> accordingly. If queue path not included, ensure queue property below matches.
azure.servicebus.connection-string=Endpoint=sb://kpmg23.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=nG84j/NgK9pLo8giw5YlJHqjKgLcBxz1S+ASbAP/BGo=;
# Queue name (overridable via AZURE_SERVICEBUS_QUEUE_USER_REGISTRATION); default "user-registration"
azure.servicebus.queue.user-registration=${AZURE_SERVICEBUS_QUEUE_USER_REGISTRATION:user-registration}
# Consumer (set enabled=false to disable). Dead-letter after max attempts.
azure.servicebus.consumer.enabled=false
azure.servicebus.consumer.max-delivery-attempts=5
# (Testing) Force processing failure for any message whose payload email matches this value (leave blank to disable)
 azure.servicebus.consumer.fail-test-email=faildlqq@test.com
# Tip: Prefer using an environment variable instead of committing the connection string. For example set
# AZURE_SERVICEBUS_CONNECTION_STRING and then remove the value here. Spring will map
# azure.servicebus.connection-string from the env var (convert to upper case, replace dots with underscores).

###############################################
# JWT Security
# Use a strong, random 256-bit (or larger) key, Base64-encoded. Example below is placeholder.
###############################################
security.jwt.secret-key=BASE64_ENCODED_SECRET_PLACEHOLDER
security.jwt.expiration-seconds=3600

###############################################
# Admin (emails granted ROLE_ADMIN, comma-separated)
###############################################
security.admin.emails=admin@example.com,admin1@gmail.com

###############################################
# Logging (adjust levels as needed)
###############################################
logging.level.org.springframework.security=INFO
logging.level.com.example.demo=INFO

###############################################
# Spring Retry (global backoff defaults can be set via properties if needed)
###############################################
# (No default properties required; using annotations in code.)

###############################################
# Misc
###############################################
# management.endpoints.web.exposure.include=health,info
# management.endpoint.health.probes.enabled=true

###################################################################################################
# Local Development Notes
# - For local dev without Azure SQL you can temporarily switch to H2 (example below) but comment out
#   the Azure SQL properties above to avoid conflicts.
# --- H2 Example (DO NOT USE IN PROD) ---
# spring.datasource.url=jdbc:h2:mem:demo;DB_CLOSE_DELAY=-1;MODE=PostgreSQL
# spring.datasource.driverClassName=org.h2.Driver
# spring.datasource.username=sa
# spring.datasource.password=
# spring.jpa.hibernate.ddl-auto=update
# spring.h2.console.enabled=true
###################################################################################################
